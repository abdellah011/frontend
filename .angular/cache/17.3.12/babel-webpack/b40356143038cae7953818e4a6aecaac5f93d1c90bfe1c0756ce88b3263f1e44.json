{"ast":null,"code":"var _a;\nimport { __decorate, __metadata, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { User } from 'app/shared/user/user.model';\nimport { UserServiceTsService } from 'app/shared/user/user.service.ts.service';\nimport Swal from 'sweetalert2';\nlet AddUserDialogComponent = class AddUserDialogComponent {\n  constructor(dialogRef, data, userService // ✅ Injecter le service\n  ) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.userService = userService;\n    this.user = new User(0, '', '', '', '', '');\n    this.errorMessage = ''; // ✅ Stocker le message d'erreur\n  }\n  onNoClick() {\n    this.dialogRef.close();\n  }\n  saveUser() {\n    if (this.user.name.trim() && this.user.email.trim()) {\n      console.log('Saving user:', this.user);\n      this.userService.addUser(this.user).subscribe(response => {\n        Swal.fire({\n          title: \"Utilisateur ajouté ✅\",\n          text: \"L'utilisateur a été ajouté avec succès !\",\n          icon: \"success\",\n          timer: 1000,\n          // ✅ Le popup disparaît après 3 secondes\n          showConfirmButton: false,\n          // ✅ Supprime le bouton \"OK\"\n          position: \"top\" // ✅ Position en haut à droite\n        }).then(() => {\n          this.dialogRef.close(response); // ✅ Fermer la boîte de dialogue après confirmation\n        });\n      }, error => {\n        this.errorMessage = error;\n        Swal.fire({\n          title: \"Erreur ❌\",\n          text: \"L'email existe déjà ou une autre erreur est survenue.\",\n          icon: \"error\",\n          timer: 1000,\n          // ✅ Le popup disparaît après 3 secondes\n          showConfirmButton: false,\n          // ✅ Supprime le bouton \"OK\"\n          position: \"top\" // ✅ Position en haut à droite\n        });\n      });\n    } else {\n      Swal.fire({\n        title: \"Champs obligatoires ⚠️\",\n        text: \"Le nom et l'email sont obligatoires.\",\n        icon: \"warning\",\n        timer: 1000,\n        // ✅ Le popup disparaît après 3 secondes\n        showConfirmButton: false,\n        // ✅ Supprime le bouton \"OK\"\n        position: \"top\" // ✅ Position en haut à droite\n      });\n    }\n  }\n};\nAddUserDialogComponent = __decorate([Component({\n  selector: 'app-add-user-dialog',\n  templateUrl: './add-user-dialog.component.html',\n  styleUrls: ['./add-user-dialog.component.css']\n}), __param(1, Inject(MAT_DIALOG_DATA)), __metadata(\"design:paramtypes\", [typeof (_a = typeof MatDialogRef !== \"undefined\" && MatDialogRef) === \"function\" ? _a : Object, Object, UserServiceTsService // ✅ Injecter le service\n])], AddUserDialogComponent);\nexport { AddUserDialogComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}