{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { UserServiceTsService } from 'app/shared/user/user.service.ts.service';\nimport { AddUserDialogComponent } from 'app/components/add-user-dialog/add-user-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { UserStoreService } from 'app/services/userStore/user-store.service';\nimport { AuthService } from 'app/services/auth.service';\nlet TableComponent = class TableComponent {\n  constructor(userServiceTsService, dialog, userStore, auth) {\n    this.userServiceTsService = userServiceTsService;\n    this.dialog = dialog;\n    this.userStore = userStore;\n    this.auth = auth;\n    this.users = [];\n    this.filteredUsers = []; // Tableau filtré pour la recherche\n    this.isEditing = false;\n    this.selectedUser = null;\n    this.searchId = ''; // ID recherché\n  }\n  ngOnInit() {\n    this.loadUsers();\n  }\n  // ✅ Charger les utilisateurs\n  loadUsers() {\n    this.userServiceTsService.getUsers().subscribe({\n      next: data => {\n        this.users = data;\n        this.filteredUsers = data; // Initialiser les utilisateurs filtrés\n        console.log(\"Utilisateurs récupérés :\", data);\n      },\n      error: err => {\n        console.error('Erreur lors de la récupération des utilisateurs:', err);\n      }\n    });\n  }\n  // ✅ Filtrer les utilisateurs par ID\n  filterUsers() {\n    if (this.searchId) {\n      this.filteredUsers = this.users.filter(user => user.id.toString().includes(this.searchId));\n    } else {\n      this.filteredUsers = [...this.users]; // Réinitialiser si champ vide\n    }\n  }\n  // ✅ Ajouter un utilisateur\n  addUser() {\n    const dialogRef = this.dialog.open(AddUserDialogComponent, {\n      width: '400px',\n      autoFocus: true,\n      disableClose: false\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.userServiceTsService.addUser(result).subscribe(() => this.loadUsers());\n      }\n    });\n  }\n  // ✅ Modifier un utilisateur\n  editUser(user) {\n    this.selectedUser = {\n      ...user\n    };\n    this.isEditing = true;\n  }\n  updateUser() {\n    if (this.selectedUser) {\n      this.userServiceTsService.updateUser(this.selectedUser).subscribe({\n        next: () => {\n          this.loadUsers();\n          this.cancelEdit();\n        },\n        error: err => {\n          console.error('Erreur lors de la mise à jour de l\\'utilisateur:', err);\n        }\n      });\n    }\n  }\n  // ✅ Supprimer un utilisateur\n  deleteUser(id) {\n    this.userServiceTsService.deleteUser(id).subscribe(() => this.loadUsers());\n  }\n  // ✅ Annuler la modification\n  cancelEdit() {\n    this.isEditing = false;\n    this.selectedUser = null;\n  }\n};\nTableComponent = __decorate([Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html'\n}), __metadata(\"design:paramtypes\", [UserServiceTsService, MatDialog, UserStoreService, AuthService])], TableComponent);\nexport { TableComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}